name: Keep Services Alive

on:
  schedule:
    # –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–∑–∞—Å—ã–ø–∞–Ω–∏—è"
    - cron: '*/5 * * * *'
  workflow_dispatch: # –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ Next.js (—Å–Ω–∞—á–∞–ª–∞)
        run: |
          echo "üîî –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ Next.js —Å–µ—Ä–≤–∏—Å–∞..."
          curl -s -m 30 --retry 2 --retry-delay 5 https://sports-club-nextjs.onrender.com/ > /dev/null || echo "‚ö†Ô∏è Next.js –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è"
          sleep 3
      
      - name: –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ Spring Boot (–æ—Å–Ω–æ–≤–Ω–æ–π –≤—Ö–æ–¥)
        run: |
          echo "üîî –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ Spring Boot –ø—Ä–æ–∫—Å–∏..."
          curl -s -m 30 --retry 2 --retry-delay 5 https://sports-club-spring.onrender.com/ > /dev/null || echo "‚ö†Ô∏è Spring Boot –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è"
          sleep 3
      
      - name: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∏–Ω–≥ Next.js
        run: |
          echo "üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∏–Ω–≥ Next.js..."
          curl -s -m 30 https://sports-club-nextjs.onrender.com/ > /dev/null || echo "‚ö†Ô∏è Next.js –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è"
      
      - name: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∏–Ω–≥ Spring Boot
        run: |
          echo "üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∏–Ω–≥ Spring Boot..."
          curl -s -m 30 https://sports-club-spring.onrender.com/ > /dev/null || echo "‚ö†Ô∏è Spring Boot –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è"
      
      - name: –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoints
        run: |
          echo "üè• –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoints..."
          curl -s -m 30 https://sports-club-spring.onrender.com/actuator/health || echo "‚ö†Ô∏è Health check –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
          echo ""
          echo "‚úÖ –í—Å–µ –ø–∏–Ω–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏."

